<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.luojj.dao.UserDao">

	<!--
		这句简单的语句的作用如下： 1. 所有在映射文件里的select 语句都将被缓存。 2. 所有在映射文件里insert,update
		和delete 语句会清空缓存。 3. 缓存使用“最近很少使用”算法来回收 4. 缓存不会被设定的时间所清空。 5.
		每个缓存可以存储1024 个列表或对象的引用（不管查询出来的结果是什么）。 6.
		缓存将作为“读/写”缓存，意味着获取的对象不是共享的且对调用者是安全的。不会有其它的调用 7. 者或线程潜在修改。 例如，创建一个FIFO
		缓存让60 秒就清空一次，存储512 个对象结果或列表引用，并且返回的结果是只读。
		因为在不用的线程里的两个调用者修改它们可能会导致引用冲突。
	-->

	<cache eviction="FIFO" flushInterval="60000" size="512" readOnly="true">
	</cache>

	<resultMap id="BaseResultMap" type="org.luojj.entity.User">
		<!--
			WARNING - @mbggenerated This element is automatically generated by
			MyBatis Generator, do not modify.
		-->
		<id column="phone_number" jdbcType="VARCHAR" property="phoneNumber" />
		<result column="user_name" jdbcType="VARCHAR" property="userName" />
		<result column="login_password" jdbcType="VARCHAR" property="loginPassword" />
		<result column="gender" jdbcType="VARCHAR" property="gender" />
		<result column="id_card_number" jdbcType="VARCHAR" property="idCardNumber" />
		<result column="trading_password" jdbcType="VARCHAR" property="tradingPassword" />
		<result column="bank_card_number" jdbcType="VARCHAR" property="bankCardNumber" />
		<result column="profile_photo" jdbcType="VARCHAR" property="profilePhoto" />
		<result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
	</resultMap>
	<sql id="Base_Column_List">
		<!--
			WARNING - @mbggenerated This element is automatically generated by
			MyBatis Generator, do not modify.
		-->
		phone_number, user_name, login_password, gender, id_card_number,
		trading_password,
		bank_card_number, profile_photo, create_time
	</sql>
	<select id="selectByPrimaryKey" parameterType="java.lang.String"
		resultMap="BaseResultMap">
		<!--
			WARNING - @mbggenerated This element is automatically generated by
			MyBatis Generator, do not modify.
		-->
		select
		<include refid="Base_Column_List" />
		from user_info
		where phone_number = #{phoneNumber,jdbcType=VARCHAR}
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.String">
		<!--
			WARNING - @mbggenerated This element is automatically generated by
			MyBatis Generator, do not modify.
		-->
		delete from user_info
		where phone_number = #{phoneNumber,jdbcType=VARCHAR}
	</delete>
	<insert id="insert" parameterType="org.luojj.entity.User">
		<!--
			WARNING - @mbggenerated This element is automatically generated by
			MyBatis Generator, do not modify.
		-->
		insert into user_info (phone_number, user_name, login_password,
		gender, id_card_number, trading_password,
		bank_card_number, profile_photo, create_time
		)
		values (#{phoneNumber,jdbcType=VARCHAR}, #{userName,jdbcType=VARCHAR},
		#{loginPassword,jdbcType=VARCHAR},
		#{gender,jdbcType=VARCHAR}, #{idCardNumber,jdbcType=VARCHAR},
		#{tradingPassword,jdbcType=VARCHAR},
		#{bankCardNumber,jdbcType=VARCHAR}, #{profilePhoto,jdbcType=VARCHAR},
		#{createTime,jdbcType=TIMESTAMP}
		)
	</insert>
	<insert id="insertSelective" parameterType="org.luojj.entity.User">
		<!--
			WARNING - @mbggenerated This element is automatically generated by
			MyBatis Generator, do not modify.
		-->
		insert into user_info
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="phoneNumber != null">
				phone_number,
      </if>
			<if test="userName != null">
				user_name,
      </if>
			<if test="loginPassword != null">
				login_password,
      </if>
			<if test="gender != null">
				gender,
      </if>
			<if test="idCardNumber != null">
				id_card_number,
      </if>
			<if test="tradingPassword != null">
				trading_password,
      </if>
			<if test="bankCardNumber != null">
				bank_card_number,
      </if>
			<if test="profilePhoto != null">
				profile_photo,
      </if>
			<if test="createTime != null">
				create_time,
      </if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="phoneNumber != null">
				#{phoneNumber,jdbcType=VARCHAR},
      </if>
			<if test="userName != null">
				#{userName,jdbcType=VARCHAR},
      </if>
			<if test="loginPassword != null">
				#{loginPassword,jdbcType=VARCHAR},
      </if>
			<if test="gender != null">
				#{gender,jdbcType=VARCHAR},
      </if>
			<if test="idCardNumber != null">
				#{idCardNumber,jdbcType=VARCHAR},
      </if>
			<if test="tradingPassword != null">
				#{tradingPassword,jdbcType=VARCHAR},
      </if>
			<if test="bankCardNumber != null">
				#{bankCardNumber,jdbcType=VARCHAR},
      </if>
			<if test="profilePhoto != null">
				#{profilePhoto,jdbcType=VARCHAR},
      </if>
			<if test="createTime != null">
				#{createTime,jdbcType=TIMESTAMP},
      </if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="org.luojj.entity.User">
		<!--
			WARNING - @mbggenerated This element is automatically generated by
			MyBatis Generator, do not modify.
		-->
		update user_info
		<set>
			<if test="userName != null">
				user_name = #{userName,jdbcType=VARCHAR},
      </if>
			<if test="loginPassword != null">
				login_password = #{loginPassword,jdbcType=VARCHAR},
      </if>
			<if test="gender != null">
				gender = #{gender,jdbcType=VARCHAR},
      </if>
			<if test="idCardNumber != null">
				id_card_number = #{idCardNumber,jdbcType=VARCHAR},
      </if>
			<if test="tradingPassword != null">
				trading_password = #{tradingPassword,jdbcType=VARCHAR},
      </if>
			<if test="bankCardNumber != null">
				bank_card_number = #{bankCardNumber,jdbcType=VARCHAR},
      </if>
			<if test="profilePhoto != null">
				profile_photo = #{profilePhoto,jdbcType=VARCHAR},
      </if>
			<if test="createTime != null">
				create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
		</set>
		where phone_number = #{phoneNumber,jdbcType=VARCHAR}
	</update>
	<update id="updateByPrimaryKey" parameterType="org.luojj.entity.User">
		<!--
			WARNING - @mbggenerated This element is automatically generated by
			MyBatis Generator, do not modify.
		-->
		update user_info
		set user_name = #{userName,jdbcType=VARCHAR},
		login_password = #{loginPassword,jdbcType=VARCHAR},
		gender = #{gender,jdbcType=VARCHAR},
		id_card_number = #{idCardNumber,jdbcType=VARCHAR},
		trading_password = #{tradingPassword,jdbcType=VARCHAR},
		bank_card_number = #{bankCardNumber,jdbcType=VARCHAR},
		profile_photo = #{profilePhoto,jdbcType=VARCHAR},
		create_time = #{createTime,jdbcType=TIMESTAMP}
		where phone_number = #{phoneNumber,jdbcType=VARCHAR}
	</update>



	<!-- 此处select标签的id值对应Mapper类中方法名 -->
	<select id="getUserByPhoneNumber" parameterType="string"
		resultMap="BaseResultMap">
		<!-- 此处写sql语句,#{Mapper类传入的参数} -->
		select * from user_info where phone_number = #{phoneNumber}
	</select>
</mapper>